<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Stripe Serverless</title>
		<link rel="stylesheet" href="css/main.css" />
	</head>
	<body>
		<header>
			<a href="/" rel="home">Serverless Worklfow for Sripe</a>
		</header>
		<main>
			<h1>Buy our products</h1>
			<div class="products"></div>
		</main>
		<template id="product">
			<div class="product">
				<h2>name</h2>
				<p class="description">description</p>
				<p class="price"></p>
				<form id="form" action="" method="POST">
					<label for="quantity">Quantity</label>
					<input
						type="number"
						id="quantity"
						name="quantity"
						value="1"
						min="1"
						max="10"
					/>
					<input type="hidden" name="sku" id="sku" value="" />
					<button>buy now</button>
				</form>
			</div>
		</template>
		<form id="payment-form">
			<div id="payment-element"></div>
			<button id="submit">
				<div class="spinner hidden" id="spinner"></div>
				<span id="button-text">Pay now</span>
			</button>
		</form>
		<script src="https://js.stripe.com/v3"></script>
		<script type="module">
			import { loadProducts } from './js/load-products.js';
			import { handlePaymentFormSubmit } from './js/handle-payment-form-submit.js';
			loadProducts();
			document
				.querySelector('#payment-form')
				.addEventListener('submit', handleSubmit);
		</script>
	</body>
</html>
